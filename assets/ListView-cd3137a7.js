import{b as v,d as L,_ as k,o as n,c as a,a as l,F as m,r as h,t as c,e as w,m as I,f as B,g,h as _,w as D,v as S,i as b,j as F,n as A,p as E,k as N}from"./index-4ca5ebfb.js";import{B as T}from"./BaseInput-6a6fd077.js";const V="/api/todo",U=()=>v.get(`${V}`),q=e=>v.post(`${V}`,e),y=L({id:"list",state:()=>({list:[]}),actions:{async a$list(){try{const{data:e}=await U();this.list=e}catch({message:e,error:t}){throw e??t}},async a$add(e){try{await q(e),await this.a$list()}catch({message:t,error:o}){throw t??o}},removeIndex(e){this.list=this.list.filter((t,o)=>e!==o)},editIndex(e,t){this.list[e]=t}},getters:{getList:({list:e})=>e,getDetail:({list:e})=>t=>e[t]}});const H={name:"BaseTable",props:{columns:{type:Array,default:()=>[]},actions:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]}}},j={key:0},M=["onClick"];function z(e,t,o,$,C,r){return n(),a("table",null,[l("thead",null,[l("tr",null,[(n(!0),a(m,null,h(o.columns,(i,p)=>(n(),a("th",{key:p},c(i),1))),128))])]),l("tbody",null,[(n(!0),a(m,null,h(o.data,(i,p)=>(n(),a("tr",{key:p},[(n(!0),a(m,null,h(o.columns,s=>(n(),a("td",{key:s},c(i[s]),1))),128)),o.actions.length?(n(),a("td",j,[(n(!0),a(m,null,h(o.actions,(s,u)=>(n(),a("button",{key:u,onClick:ne=>e.$emit(`${s.event}`,i)},c(s.title),9,M))),128))])):w("",!0)]))),128))])])}const O=k(H,[["render",z]]);const f={title:"",description:"",category:"",completed:!1},R={name:"ListView",data:()=>({input:{...f},editing:!1,table:{columns:["id","title","description","completed"],actions:[{title:"Handle",event:"handle-event"}]}}),components:{BaseInput:T,BaseTable:O},computed:{...I(y,["getList","getDetail"])},async mounted(){await this.a$list()},methods:{...B(y,["a$list","a$add","editIndex","removeIndex"]),resetForm(){Object.assign(this.input,f),this.editing=!1},addForm(e){console.log(e),this.editing===!1?this.a$add({...this.input}):this.editIndex(this.editing,{...this.input}),this.resetForm()},detailList(e){this.editing=e,this.input={...this.getDetail(e)}},toggleCompleted(e){const t=this.getDetail(e);this.editIndex(e,{...t,completed:!t.completed})},handleLogEvent(e){console.log(e)}}},d=e=>(E("data-v-deaa341f"),e=e(),N(),e),G=d(()=>l("h1",null,"List",-1)),J=d(()=>l("br",null,null,-1)),K=d(()=>l("br",null,null,-1)),P=d(()=>l("br",null,null,-1)),Q=d(()=>l("br",null,null,-1)),W={type:"submit"},X=d(()=>l("button",{type:"reset"},"Cancel",-1)),Y=d(()=>l("hr",null,null,-1)),Z={class:"list"},x=["onDblclick"],ee=["onClick","disabled"],te=["onClick","disabled"],se=d(()=>l("hr",null,null,-1));function le(e,t,o,$,C,r){const i=g("base-input"),p=g("base-table");return n(),a("div",null,[G,l("form",{onSubmit:t[4]||(t[4]=F(s=>r.addForm(s),["prevent"])),method:"post",onReset:t[5]||(t[5]=()=>r.resetForm())},[_(i,{modelValue:e.input.title,"onUpdate:modelValue":t[0]||(t[0]=s=>e.input.title=s),class:"input",placeholder:"add new",required:""},null,8,["modelValue"]),J,_(i,{modelValue:e.input.description,"onUpdate:modelValue":t[1]||(t[1]=s=>e.input.description=s),class:"input",placeholder:"desccription",required:""},null,8,["modelValue"]),K,_(i,{modelValue:e.input.category,"onUpdate:modelValue":t[2]||(t[2]=s=>e.input.category=s),class:"input",placeholder:"category",required:""},null,8,["modelValue"]),P,D(l("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>e.input.completed=s),type:"checkbox"},null,512),[[S,e.input.completed]]),b(" Completed "),Q,l("button",W,c(e.editing!==!1?"Edit":"Add"),1),X],32),Y,l("ol",Z,[(n(!0),a(m,null,h(e.getList,(s,u)=>(n(),a("li",{key:u,onDblclick:()=>r.toggleCompleted(u),class:A({strike:s.completed})},[l("button",{class:"red",onClick:()=>e.removeIndex(u),disabled:e.editing!==!1}," × ",8,ee),l("button",{class:"orange",onClick:()=>r.detailList(u),disabled:e.editing!==!1}," ✎ ",8,te),b(" "+c(s.title)+" "+c(s!=null&&s.description?`- ${s.description}`:""),1)],42,x))),128))]),se,_(p,{data:e.getList,columns:e.table.columns,actions:e.table.actions,onHandleEvent:r.handleLogEvent},null,8,["data","columns","actions","onHandleEvent"])])}const ie=k(R,[["render",le],["__scopeId","data-v-deaa341f"]]);export{ie as default};
