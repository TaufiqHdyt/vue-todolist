import{b,d as f,_ as y,m as V,e as v,r as w,o as r,c as p,a as i,f as u,w as I,v as k,g as m,t as c,h as C,F as L,i as $,n as D,p as S,j as F}from"./index-8a207c8d.js";import{B}from"./BaseInput-bdb0f38a.js";const _="/api/todo",U=()=>b.get(`${_}`),q=e=>b.post(`${_}`,e),h=f({id:"list",state:()=>({list:[]}),actions:{async a$list(){try{const{data:e}=await U();this.list=e}catch({message:e,error:t}){throw e??t}},async a$add(e){try{await q(e),await this.a$list()}catch({message:t,error:l}){throw t??l}},removeIndex(e){this.list=this.list.filter((t,l)=>e!==l)},editIndex(e,t){this.list[e]=t}},getters:{getList:({list:e})=>e,getDetail:({list:e})=>t=>e[t]}});const g={title:"",description:"",category:"",completed:!1},A={name:"ListView",data:()=>({input:{...g},editing:!1}),components:{BaseInput:B},computed:{...V(h,["getList","getDetail"])},async mounted(){await this.a$list()},methods:{...v(h,["a$list","a$add","editIndex","removeIndex"]),resetForm(){Object.assign(this.input,g),this.editing=!1},addForm(e){console.log(e),this.editing===!1?this.a$add({...this.input}):this.editIndex(this.editing,{...this.input}),this.resetForm()},detailList(e){this.editing=e,this.input={...this.getDetail(e)}},toggleCompleted(e){const t=this.getDetail(e);this.editIndex(e,{...t,completed:!t.completed})}}},o=e=>(S("data-v-ee5aa569"),e=e(),F(),e),N=o(()=>i("h1",null,"List",-1)),j=o(()=>i("br",null,null,-1)),E=o(()=>i("br",null,null,-1)),M=o(()=>i("br",null,null,-1)),z=o(()=>i("br",null,null,-1)),O={type:"submit"},R=o(()=>i("button",{type:"reset"},"Cancel",-1)),T={class:"list"},G=["onDblclick"],H=["onClick","disabled"],J=["onClick","disabled"];function K(e,t,l,P,Q,a){const d=w("base-input");return r(),p("div",null,[N,i("form",{onSubmit:t[4]||(t[4]=C(s=>a.addForm(s),["prevent"])),method:"post",onReset:t[5]||(t[5]=()=>a.resetForm())},[u(d,{modelValue:e.input.title,"onUpdate:modelValue":t[0]||(t[0]=s=>e.input.title=s),class:"input",placeholder:"add new",required:""},null,8,["modelValue"]),j,u(d,{modelValue:e.input.description,"onUpdate:modelValue":t[1]||(t[1]=s=>e.input.description=s),class:"input",placeholder:"desccription",required:""},null,8,["modelValue"]),E,u(d,{modelValue:e.input.category,"onUpdate:modelValue":t[2]||(t[2]=s=>e.input.category=s),class:"input",placeholder:"category",required:""},null,8,["modelValue"]),M,I(i("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>e.input.completed=s),type:"checkbox"},null,512),[[k,e.input.completed]]),m(" Completed "),z,i("button",O,c(e.editing!==!1?"Edit":"Add"),1),R],32),i("ol",T,[(r(!0),p(L,null,$(e.getList,(s,n)=>(r(),p("li",{key:n,onDblclick:()=>a.toggleCompleted(n),class:D({strike:s.completed})},[i("button",{class:"red",onClick:()=>e.removeIndex(n),disabled:e.editing!==!1}," × ",8,H),i("button",{class:"orange",onClick:()=>a.detailList(n),disabled:e.editing!==!1}," ✎ ",8,J),m(" "+c(s.title)+" "+c(s!=null&&s.description?`- ${s.description}`:""),1)],42,G))),128))])])}const Y=y(A,[["render",K],["__scopeId","data-v-ee5aa569"]]);export{Y as default};
